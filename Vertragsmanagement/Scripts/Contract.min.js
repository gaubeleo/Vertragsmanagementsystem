columns=["intnr","extnr","bez","ges","kos","zim","kit","mim","avim","mwst","contract_partnerIs","bem","dropdowncategory","dropdownsubcategory","contract_species","contract_signer","contract_personInCharge","contract_mappedDepartment","contract_observingDepartment","contract_partner_name","zbgvon","vbvon","ersvon","kdatvon","vevon","ervon","esvon","loc","escalated","reminded","noticeReminded","contract_otherFeatures","costcentre_describtion","contract_mappedDepartment_mandant_name","status","Aktionen"];$(document).ready(function(){var f,u,r;$.ajax({type:"GET",url:"/Contract/ContractCategories",datatype:"Json",success:function(n){$.each(n,function(n,t){$("#dropdowncategory").append('<option value="'+t.ID+'">'+t.name+"<\/option>")});$("#dropdownsubcategory").prop("disabled",!0)}});f=new Date;u=f.getFullYear()+"-"+("0"+(f.getMonth()+1)).slice(-2)+"-"+("0"+f.getDate()).slice(-2);$("#collapse1").on("shown.bs.collapse",function(){$("#customfilter").removeClass("glyphicon-chevron-down").addClass("glyphicon-chevron-up")});$("#collapse1").on("hidden.bs.collapse",function(){$("#customfilter").removeClass("glyphicon-chevron-up").addClass("glyphicon-chevron-down")});$('[data-toggle="popover"]').popover({trigger:"hover",placement:"auto bottom",viewport:{selector:"tbody",padding:0}});var n=$("#ContractsTable").DataTable({dom:"<'row'<'col-sm-3'l><'col-sm-6 text-center'B><'col-sm-3'f>><'row'<'col-sm-12'tr>><'row'<'col-sm-2'i>><'row'<'col-sm-10 pull-right'p>>",lengthMenu:[7,15,25,50],pageLength:7,scrollX:!0,scrollY:!0,colReorder:!0,buttons:[{extend:"collection",text:"Filter",autoClose:!0,collectionLayout:"three-column",buttons:[{extend:"colvis",postfixButtons:["colvisRestore"],collectionLayout:"three-column",columns:"0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,31,32,33,34,35"},{text:"Standardansicht",action:function(){n.column(1).visible(!0);n.column(2).visible(!0);n.column(3).visible(!0);n.column(12).visible(!0);n.column(14).visible(!0);n.column(15).visible(!0);n.column(18).visible(!0);n.column(19).visible(!0);n.column(21).visible(!0);n.column(34).visible(!0);n.column(35).visible(!0);n.column(0).visible(!1);n.column(4).visible(!1);n.column(5).visible(!1);n.column(6).visible(!1);n.column(7).visible(!1);n.column(8).visible(!1);n.column(9).visible(!1);n.column(10).visible(!1);n.column(11).visible(!1);n.column(13).visible(!1);n.column(16).visible(!1);n.column(17).visible(!1);n.column(20).visible(!1);n.column(22).visible(!1);n.column(23).visible(!1);n.column(24).visible(!1);n.column(25).visible(!1);n.column(26).visible(!1);n.column(27).visible(!1);n.column(31).visible(!1);n.column(32).visible(!1);n.column(33).visible(!1)}},{text:"Erweiterte Ansicht",action:function(t,i){n.column(1).visible(!0);n.column(2).visible(!0);n.column(3).visible(!0);n.column(12).visible(!0);n.column(14).visible(!0);n.column(15).visible(!0);n.column(18).visible(!0);n.column(19).visible(!0);n.column(21).visible(!0);n.column(34).visible(!0);n.column(35).visible(!0);i.column(0).visible(!i.column(0).visible());i.column(4).visible(!i.column(4).visible());i.column(5).visible(!i.column(5).visible());i.column(6).visible(!i.column(6).visible());i.column(7).visible(!i.column(7).visible());i.column(8).visible(!i.column(8).visible());i.column(9).visible(!i.column(9).visible());i.column(10).visible(!i.column(10).visible());i.column(11).visible(!i.column(11).visible());i.column(13).visible(!i.column(13).visible());i.column(16).visible(!i.column(16).visible());i.column(17).visible(!i.column(17).visible());i.column(20).visible(!i.column(20).visible());i.column(22).visible(!i.column(22).visible());i.column(23).visible(!i.column(23).visible());i.column(24).visible(!i.column(24).visible());i.column(25).visible(!i.column(25).visible());i.column(26).visible(!i.column(26).visible());i.column(27).visible(!i.column(27).visible());i.column(31).visible(!i.column(31).visible());i.column(32).visible(!i.column(32).visible());i.column(33).visible(!i.column(33).visible())}}]},{extend:"csv",exportOptions:{columns:":not(.all)"},filename:u+"--*"},{extend:"excel",exportOptions:{columns:":visible:not(.all)"},filename:u+"--*"},{extend:"pdf",exportOptions:{columns:":visible:not(.all)"},orientation:"landscape",pageSize:"LEGAL",filename:u+"--*"},{extend:"print",exportOptions:{columns:":visible:not(.all)"},title:u+"--*"}],language:{url:"//cdn.datatables.net/plug-ins/1.10.12/i18n/German.json",buttons:{colvis:"Spalten auswählen",colvisRestore:"Zurücksetzen",print:"Drucken"}},columnDefs:[{targets:[0],visible:!1},{targets:[4],visible:!1},{targets:[5],visible:!1},{targets:[6],visible:!1},{targets:[7],visible:!1},{targets:[8],visible:!1},{targets:[9],visible:!1},{targets:[10],visible:!1},{targets:[11],visible:!1},{targets:[13],visible:!1},{targets:[16],visible:!1},{targets:[17],visible:!1},{targets:[20],visible:!1},{targets:[22],visible:!1},{targets:[23],visible:!1},{targets:[24],visible:!1},{targets:[25],visible:!1},{targets:[26],visible:!1},{targets:[27],visible:!1},{targets:[28],visible:!1,orderable:!1},{targets:[29],visible:!1,searchable:!1,orderable:!1},{targets:[30],visible:!1,searchable:!1,orderable:!1},{targets:[31],visible:!1},{targets:[32],visible:!1},{targets:[33],visible:!1},{targets:[35],searchable:!1,orderable:!1}]}),t=function(t,i){$("#"+t).on("keyup change",function(){n.columns(i).search(this.value).draw()})},i=function(t,i){$("#"+t).on("keyup change",function(){$("#"+t+" option:selected").val()!==""?n.columns(i).search($("#"+t+" option:selected").text()).draw():n.columns(i).search("").draw()})},e=function(t,i){$("#"+t).on("keyup change",function(){n.columns(i).search($("#"+t+" option:selected").val()).draw()})},o=function(t,i){$("#"+t).on("keyup change",function(){t==="dropdowncategory"?($("#"+t+" option:selected").text()==="Kategorie wählen"?(n.columns(i).search("").draw(),n.columns(13).search("").draw(),$("#dropdownsubcategory").prop("disabled",!0),n.column(13).visible(!1)):(n.columns(i).search($("#"+t+" option:selected").text()).draw(),n.columns(13).search("").draw()),$("#dropdownsubcategory").empty(),$.ajax({type:"POST",url:"/Contract/ContractSubcategories",datatype:"Json",data:{contractID:$("#dropdowncategory").val()},success:function(t){var i=0;$("#dropdownsubcategory").append('<option value="">Unterkategorie wählen<\/option>');$.each(t,function(n,t){$("#dropdownsubcategory").append('<option value="'+t.categoryID+'">'+t.name+"<\/option>");i+=1});$("select[dropdownsubcategory] option:eq(2)").attr("selected","selected");i===0?($("#dropdownsubcategory").prop("disabled",!0),n.column(13).visible(!1)):(n.column(13).visible(!0),$("#dropdownsubcategory").prop("disabled",!1),$("select[dropdownsubcategory] option:eq(1)").attr("selected","selected"))}})):t==="dropdownsubcategory"&&($("#"+t+" option:selected").text()==="Unterkategorie wählen"?n.columns(i).search("").draw():n.columns(i).search($("#"+t+" option:selected").text()).draw())})};t("intnr",0);t("extnr",1);t("bez",2);t("zim",5);t("kit",6);t("min",7);t("avim",8);t("mwst",9);i("contract_partnerIs",10);t("bem",11);o("dropdowncategory",12);o("dropdownsubcategory",13);i("contract_species",14);i("contract_signer",15);i("contract_personInCharge",16);i("contract_mappedDepartment",17);i("contract_observingDepartment",18);i("contract_partner_name",19);t("loc",27);e("status",34);$(":checkbox").change(function(){n.column(28).visible(!0);$(this).is(":checked")?n.columns(28).search(!0).draw():n.columns(28).search("").draw();n.column(28).visible(!1);n.rows().iterator("row",function(n,t){$(this.row(t).node()).attr("class").indexOf("highlight2")>-1?($(this.row(t).node()).removeClass("highlight2"),$(this.row(t).node()).addClass("highlight")):$(this.row(t).node()).attr("class").indexOf("highlight")>-1&&($(this.row(t).node()).removeClass("highlight"),$(this.row(t).node()).addClass("highlight2"))})});i("contract_otherFeatures",31);e("costcentre_describtion",32);i("contract_mappedDepartment_mandant_name",33);$("#ContractsTable").on("column-visibility.dt",function(t,i,r,u){switch(r){case 28:break;case 29:break;case 30:break;case 35:break;default:u===!1?(document.getElementById(columns[r]).disabled=!0,$("#"+columns[r]).find("input,button,textarea,select").prop("disabled",!0)):(document.getElementById(columns[r]).disabled=!1,$("#"+columns[r]).find("input,button,textarea,select").prop("disabled",!1));yadcf.exResetFilters(n,[r]);$("#"+columns[r]).val("");n.search("").columns(r).draw()}});r={showTodayButton:!0,toolbarPlacement:"top",showClear:!0,showClose:!0,tooltips:{today:"Heutiges Datum",clear:"Zurücksetzen",close:"Schließen",selectMonth:"Monat wählen",prevMonth:"Vorheriger Monat",nextMonth:"Nächster Monat",selectYear:"Jahr wählen",prevYear:"Vorheriges Jahr",nextYear:"Nächstes Jahr",selectDecade:"Jahrzehnt wählen",prevDecade:"Vorheriges Jahrzent",nextDecade:"Nächstes Jahrzent",prevCentury:"Vorheriges Jahrhundert",nextCentury:"Nächstes Jahrhundert"}};yadcf.init(n,[{column_number:3,filter_container_id:"ges",filter_type:"range_number",filter_reset_button_text:!1,ignore_char:",00"},{column_number:4,filter_container_id:"kos",filter_type:"range_number",filter_reset_button_text:!1,ignore_char:",00"},{column_number:20,filter_container_id:"zbgvon",locale:"de",filter_type:"range_date",datepicker_type:"bootstrap-datetimepicker",date_format:"YYYY-MM-DD",filter_reset_button_text:!1,filter_plugin_options:r},{column_number:21,filter_container_id:"vbvon",locale:"de",filter_type:"range_date",datepicker_type:"bootstrap-datetimepicker",date_format:"YYYY-MM-DD",filter_reset_button_text:!1,filter_plugin_options:r},{column_number:22,filter_container_id:"ersvon",locale:"de",filter_type:"range_date",datepicker_type:"bootstrap-datetimepicker",date_format:"YYYY-MM-DD",filter_reset_button_text:!1,filter_plugin_options:r},{column_number:23,filter_container_id:"kdatvon",locale:"de",filter_type:"range_date",datepicker_type:"bootstrap-datetimepicker",date_format:"YYYY-MM-DD",filter_reset_button_text:!1,filter_plugin_options:r},{column_number:24,filter_container_id:"vevon",locale:"de",filter_type:"range_date",datepicker_type:"bootstrap-datetimepicker",date_format:"YYYY-MM-DD",filter_reset_button_text:!1,filter_plugin_options:r},{column_number:25,filter_container_id:"ervon",locale:"de",filter_type:"range_date",datepicker_type:"bootstrap-datetimepicker",date_format:"YYYY-MM-DD",filter_reset_button_text:!1,filter_plugin_options:r},{column_number:26,filter_container_id:"esvon",locale:"de",filter_type:"range_date",datepicker_type:"bootstrap-datetimepicker",date_format:"YYYY-MM-DD",filter_reset_button_text:!1,filter_plugin_options:r}]);$("#reset").on("click",function(){$("#dropdownsubcategory").prop("disabled",!0);yadcf.exResetAllFilters(n);n.search("").columns().search("").draw();n.rows().iterator("row",function(n,t){$(this.row(t).node()).attr("class").indexOf("highlight2")>-1&&($(this.row(t).node()).removeClass("highlight2"),$(this.row(t).node()).addClass("highlight"))})});$(window).load(function(){var n=$("#status").attr("preselect");switch(n){case"":break;case"eskaliert":$('[value="esk"').prop("checked",!0);alert("Benutzerdefinierter Filter automatisch gesetzt.\nEs werden nur eskalierte Verträge angezeigt.");$('[value="esk"').trigger("change");break;default:$(".form-control option[value="+n+"]").prop("selected",!0);$("#status").trigger("change");alert("Benutzerdefinierter Filter automatisch gesetzt.\nEs werden nur "+n+"e Verträge angezeigt.")}})});$(document).ready(function(){$.each(columns,function(n,t){switch(n){case 4:case 20:case 22:case 23:case 24:case 25:case 26:$("#"+t).find("input,button,textarea,select").prop("disabled",!0)}})});